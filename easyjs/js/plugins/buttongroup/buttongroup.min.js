if(typeof LigerUIManagers=="undefined")LigerUIManagers={};if(typeof LigerUIButtonGroup=="undefined")LigerUIButtonGroup={};(function($){$.fn.ligerGetButtonGroupManager=function(){return LigerUIManagers[this[0].id+"_ButtonGroup"]};$.fn.buttonGroup=function(p){this.each(function(){if(this.usedButtonGroup)return;var singleId=(new Date).getTime();var g={addItem:function(t){LigerUIButtonGroup[singleId+"_"+t.id]=t;var e=[];e.push('<div class="l-button-item l-panel-btn">');e.push(' <div class="l-panel-btn-l">');e.push("     <span></span>");e.push(" </div>");e.push(' <div class="l-panel-btn-r"></div>');e.push("</div>");var n=$(e.join(""));g.button.append(n);t.id&&n.attr("buttonid",t.id+"_"+singleId);if(t.icon){var i=$(".l-panel-btn-l span",n);i.before("<div class='l-icon l-icon-"+t.icon+"'></div>");n.addClass("l-button-item-hasicon")}if(t.line){n.before("<div class='l-toolbar-split'></div>")}t.text&&this.setText($("span:first",n),t.text);t.disable&&n.addClass("l-button-item-disable")&&n.addClass("l-panel-btn-disable");var s=g.addMenu(t.children,n);if(s)LigerUIButtonGroup[singleId+"_"+t.id+"_menu"]=s;g.addEvent(n,t,s)},addMenu:function(t,e){if(t&&t.length>0){var n=$(".l-panel-btn-l",e);var i=$('<div class="l-panel-btn-arrow"></div>');n.after(i);var s=$.ligerMenu({width:120,items:t,afterHide:function(){$(e).removeClass("l-panel-btn-over")}});$(s.menu).mouseleave(function(){s.hide();$(e).removeClass("l-panel-btn-over")});return s}},addEvent:function(t,e,n){if(!t.hasClass("l-button-item-disable")){e.click&&t.click(function(){e.click(e)});t.hover(function(){$(this).addClass("l-panel-btn-over");if(n)n.show({top:t.offset().top+t.height(),left:t.offset().left})},function(){if(!n){$(this).removeClass("l-panel-btn-over")}else{}})}},setDisable:function(t){var e=$("[buttonid="+t+"_"+singleId+"]");e.addClass("l-button-item-disable");e.addClass("l-panel-btn-disable");e.unbind("click");e.unbind("hover")},setEnable:function(t){var e=$("[buttonid="+t+"_"+singleId+"]");e.removeClass("l-button-item-disable").removeClass("l-panel-btn-disable");var n=LigerUIButtonGroup[singleId+"_"+t];e.click(function(){n.click(n)});var i=LigerUIButtonGroup[singleId+"_"+t+"_menu"];g.addEvent(e,n,i)},setText:function(t,e){var n;if(typeof t=="string"){n=LigerUIButtonGroup[singleId+"_"+t];n.text=e;t=$("span:first",$("[buttonid="+t+"_"+singleId+"]"));t.html(e);t.unbind("click");t.bind("click",function(){n.click(n)})}else{$(t).html(e)}},disableAll:function(){$.each(LigerUIButtonGroup,function(i,item){if(eval("/^"+singleId+"_("+item.id+")$/").test(i))g.setDisable(item.id)})},enableAll:function(){$.each(LigerUIButtonGroup,function(i,item){if(eval("/^"+singleId+"_("+item.id+")$/").test(i))g.setEnable(item.id)})},remove:function(t){var e=$("[buttonid="+t+"_"+singleId+"]");e.remove()}};g.button=$(this);if(!g.button.hasClass("l-button"))g.button.addClass("l-button");if(p.items){$(p.items).each(function(t,e){g.addItem(e)})}if(this.id==undefined)this.id="LigerUI_"+singleId;LigerUIManagers[this.id+"_ButtonGroup"]=g;this.usedButtonGroup=true});if(this.length==0)return null;if(this.length==1)return LigerUIManagers[this[0].id+"_ButtonGroup"];var managers=[];this.each(function(){managers.push(LigerUIManagers[this.id+"_ButtonGroup"])});return managers}})(jQuery);