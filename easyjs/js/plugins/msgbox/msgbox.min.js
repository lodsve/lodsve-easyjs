(function(e){e.msgbox=e.msgbox||{};e.msgbox.defaults={icon:"ok",i18n:false,message:"",modal:false,closeOnDblclick:true,closeOnEsc:true,timeOut:3e3,beforeHide:null,afterHide:null};e.msgbox.show=function(n){n=e.extend({},e.msgbox.defaults,n||{});var o={show:function(){var n;var s=true;if(e(".msgbox_layout_wrap").length>0){n=e(".msgbox_layout_wrap")[0];s=false}else{n=e(o.getHtml())}e(".msgbox_layout_wrap",n).css("top",o.getTop()+"px");o.setText(o.getMessage(),n);o.setIcon(o.getStyle(),n);o.addEvent();o.render(n,s)},getMessage:function(){if(n.i18n){var o=e.util.getMessage(n.message);if(!o||""==o)o=n.message;return o}return n.message},getStyle:function(){var e;if(n.icon!="ok"&&n.icon!="no"&&n.icon!="warn"&&n.icon!="clear"){e="icon_clear"}else{e="icon_"+n.icon}return e},getHtml:function(){var e=[];e.push('<div class="msgbox_layout_wrap" id="m_mgbox" style="">');e.push('     <span class="msgbox_layout" style="z-index: 10000;">');e.push('         <span class="" id="iconSpan"></span>');e.push('         <span id="txtPan"></span>');e.push('         <span class="icon_end"></span>');e.push("     </span>");e.push("</div>");return e.join("")},getTop:function(){var n=e(window).height();return n-27},setText:function(n,o){var s=e("#txtPan",e(o));s.html(n)},setIcon:function(n,o){var s=e("#iconSpan",e(o));var t=s.attr("class");s.removeClass(t);s.addClass(n)},addEvent:function(){o.inerval=setInterval(function(){o.closeBox()},n.timeOut)},removeModal:function(){e("div.l-window-mask:last").remove()},closeBox:function(){if(n.beforeHide){n.beforeHide()}e("#m_mgbox").hide();o.removeModal();if(n.afterHide){n.afterHide()}o.cleanEvent()},cleanEvent:function(){if(o.inerval)clearInterval(o.inerval);if(n.closeOnEsc)jQuery(document).unbind("keydown","esc")},render:function(s,t){if(n.modal){o.modal=e('<div class="l-window-mask" style="display: block;opacity: 0.5;"></div>');o.modal.height(e(document).height());o.modal.width(e(window).width());e("body").append(o.modal);if(n.closeOnDblclick)o.modal.bind("dblclick",o.closeBox)}if(n.closeOnEsc)jQuery(document).bind("keydown","esc",function(e){o.closeBox()});if(t){e("body").append(s)}else{e(s).show()}}};o.show()}})(jQuery);