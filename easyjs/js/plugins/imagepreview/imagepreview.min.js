(function(e){e.fn.preview=function(){var i=10;var p=20;var t=e(window).width();e(this).each(function(){var s={init:function(){var i=[];i.push("<div>");i.push(" <div class='first'>");i.push("     <img src='"+s.ele.attr("href")+"'/>");i.push("     <p>"+s.ele.attr("title")+"</p>");i.push(" </div>");i.push("</div>");s.preview=e(i.join(""));e("body").append(s.preview)},addCss:function(r){s.preview.css({position:"absolute",padding:"4px",border:"1px solid #f3f3f3",backgroundColor:"#eeeeee",top:s.getTop(r)+"px",zIndex:1e3});e("div.first",s.preview).css({padding:"5px",backgroundColor:"white",border:"1px solid #cccccc"});e("div.first > p",s.preview).css({textAlign:"center",fontSize:"12px",padding:"8px 0 3px",margin:"0"});if(r.pageX<t/2){s.preview.css({left:r.pageX+i+"px",right:"auto"}).fadeIn("fast")}else{s.preview.css("right",t-r.pageX+p+"px").css("left","auto").fadeIn("fast")}},getTop:function(i){var t=i.pageY;var r=e(window).height();var n=s.preview.height();if(r-t-n>0){return t+p}else{return t-p-n}}};s.ele=e(this);s.ele.hover(function(e){s.init();s.addCss(e);s.ele.mousemove(function(e){s.preview.css("top",s.getTop(e)+"px");if(e.pageX<t/2){s.preview.css("left",e.pageX+p+"px").css("right","auto")}else{s.preview.css("right",t-e.pageX+p+"px").css("left","auto")}})},function(){s.preview.remove()})})}})(jQuery);