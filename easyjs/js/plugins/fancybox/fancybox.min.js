(function(e){var t,i,n,a,o,r,d,s,f,c,l=0,h={},p=[],g=0,u={},b=[],y=null,w=new Image,m=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,x=/[^\.]\.(swf)\s*$/i,v,I=1,C=0,k="",O,j,S=false,T=e.extend(e("<div/>")[0],{prop:0}),A=e.browser.msie&&e.browser.version<7&&!window.XMLHttpRequest,D=function(){i.hide();w.onerror=w.onload=null;if(y){y.abort()}t.empty()},E=function(){if(false===h.onError(p,l,h)){i.hide();S=false;return}h.titleShow=false;h.width="auto";h.height="auto";t.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>');N()},F=function(){var n=p[l],a,o,d,s,f,c;D();h=e.extend({},e.fn.fancybox.defaults,typeof e(n).data("fancybox")=="undefined"?h:e(n).data("fancybox"));c=h.onStart(p,l,h);if(c===false){S=false;return}else if(typeof c=="object"){h=e.extend(h,c)}d=h.title||(n.nodeName?e(n).attr("title"):n.title)||"";if(n.nodeName&&!h.orig){h.orig=e(n).children("img:first").length?e(n).children("img:first"):e(n)}if(d===""&&h.orig&&h.titleFromAlt){d=h.orig.attr("alt")}a=h.href||(n.nodeName?e(n).attr("href"):n.href)||null;if(/^(?:javascript)/i.test(a)||a=="#"){a=null}if(h.type){o=h.type;if(!a){a=h.content}}else if(h.content){o="html"}else if(a){if(a.match(m)){o="image"}else if(a.match(x)){o="swf"}else if(e(n).hasClass("iframe")){o="iframe"}else if(a.indexOf("#")===0){o="inline"}else{o="ajax"}}if(!o){E();return}if(o=="inline"){n=a.substr(a.indexOf("#"));o=e(n).length>0?"inline":"ajax"}h.type=o;h.href=a;h.title=d;if(h.autoDimensions){if(h.type=="html"||h.type=="inline"||h.type=="ajax"){h.width="auto";h.height="auto"}else{h.autoDimensions=false}}if(h.modal){h.overlayShow=true;h.hideOnOverlayClick=false;h.hideOnContentClick=false;h.enableEscapeButton=false;h.showCloseButton=false}h.padding=parseInt(h.padding,10);h.margin=parseInt(h.margin,10);t.css("padding",h.padding+h.margin);e(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){e(this).replaceWith(r.children())});switch(o){case"html":t.html(h.content);N();break;case"inline":if(e(n).parent().is("#fancybox-content")===true){S=false;return}e('<div class="fancybox-inline-tmp" />').hide().insertBefore(e(n)).bind("fancybox-cleanup",function(){e(this).replaceWith(r.children())}).bind("fancybox-cancel",function(){e(this).replaceWith(t.children())});e(n).appendTo(t);N();break;case"image":S=false;e.fancybox.showActivity();w=new Image;w.onerror=function(){E()};w.onload=function(){S=true;w.onerror=w.onload=null;B()};w.src=a;break;case"swf":h.scrolling="no";s='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+h.width+'" height="'+h.height+'"><param name="movie" value="'+a+'"></param>';f="";e.each(h.swf,function(e,t){s+='<param name="'+e+'" value="'+t+'"></param>';f+=" "+e+'="'+t+'"'});s+='<embed src="'+a+'" type="application/x-shockwave-flash" width="'+h.width+'" height="'+h.height+'"'+f+"></embed></object>";t.html(s);N();break;case"ajax":S=false;e.fancybox.showActivity();h.ajax.win=h.ajax.success;y=e.ajax(e.extend({},h.ajax,{url:a,data:h.ajax.data||{},error:function(e,t,i){if(e.status>0){E()}},success:function(e,n,o){var r=typeof o=="object"?o:y;if(r.status==200){if(typeof h.ajax.win=="function"){c=h.ajax.win(a,e,n,o);if(c===false){i.hide();return}else if(typeof c=="string"||typeof c=="object"){e=c}}t.html(e);N()}}}));break;case"iframe":P();break}},N=function(){var i=h.width,n=h.height;if(i.toString().indexOf("%")>-1){i=parseInt((e(window).width()-h.margin*2)*parseFloat(i)/100,10)+"px"}else{i=i=="auto"?"auto":i+"px"}if(n.toString().indexOf("%")>-1){n=parseInt((e(window).height()-h.margin*2)*parseFloat(n)/100,10)+"px"}else{n=n=="auto"?"auto":n+"px"}t.wrapInner('<div style="width:'+i+";height:"+n+";overflow: "+(h.scrolling=="auto"?"auto":h.scrolling=="yes"?"scroll":"hidden")+';position:relative;"></div>');h.width=t.width();h.height=t.height();P()},B=function(){h.width=w.width;h.height=w.height;e("<img />").attr({id:"fancybox-img",src:w.src,alt:h.title}).appendTo(t);P()},P=function(){var o,y;i.hide();if(a.is(":visible")&&false===u.onCleanup(b,g,u)){e.event.trigger("fancybox-cancel");S=false;return}S=true;e(r.add(n)).unbind();e(window).unbind("resize.fb scroll.fb");e(document).unbind("keydown.fb");if(a.is(":visible")&&u.titlePosition!=="outside"){a.css("height",a.height())}b=p;g=l;u=h;if(u.overlayShow){n.css({"background-color":u.overlayColor,opacity:u.overlayOpacity,cursor:u.hideOnOverlayClick?"pointer":"auto",height:e(document).height()});if(!n.is(":visible")){if(A){e("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"})}n.show()}}else{n.hide()}j=q();L();if(a.is(":visible")){e(d.add(f).add(c)).hide();o=a.position(),O={top:o.top,left:o.left,width:a.width(),height:a.height()};y=O.width==j.width&&O.height==j.height;r.fadeTo(u.changeFade,.3,function(){var i=function(){r.html(t.contents()).fadeTo(u.changeFade,1,H)};e.event.trigger("fancybox-change");r.empty().removeAttr("filter").css({"border-width":u.padding,width:j.width-u.padding*2,height:h.autoDimensions?"auto":j.height-C-u.padding*2});if(y){i()}else{T.prop=0;e(T).animate({prop:1},{duration:u.changeSpeed,easing:u.easingChange,step:K,complete:i})}});return}a.removeAttr("style");r.css("border-width",u.padding);if(u.transitionIn=="elastic"){O=V();r.html(t.contents());a.show();if(u.opacity){j.opacity=0}T.prop=0;e(T).animate({prop:1},{duration:u.speedIn,easing:u.easingIn,step:K,complete:H});return}if(u.titlePosition=="inside"&&C>0){s.show()}r.css({width:j.width-u.padding*2,height:h.autoDimensions?"auto":j.height-C-u.padding*2}).html(t.contents());a.css(j).fadeIn(u.transitionIn=="none"?0:u.speedIn,H)},M=function(e){if(e&&e.length){if(u.titlePosition=="float"){return'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+e+'</td><td id="fancybox-title-float-right"></td></tr></table>'}return'<div id="fancybox-title-'+u.titlePosition+'">'+e+"</div>"}return false},L=function(){k=u.title||"";C=0;s.empty().removeAttr("style").removeClass();if(u.titleShow===false){s.hide();return}k=e.isFunction(u.titleFormat)?u.titleFormat(k,b,g,u):M(k);if(!k||k===""){s.hide();return}s.addClass("fancybox-title-"+u.titlePosition).html(k).appendTo("body").show();switch(u.titlePosition){case"inside":s.css({width:j.width-u.padding*2,marginLeft:u.padding,marginRight:u.padding});C=s.outerHeight(true);s.appendTo(o);j.height+=C;break;case"over":s.css({marginLeft:u.padding,width:j.width-u.padding*2,bottom:u.padding}).appendTo(o);break;case"float":s.css("left",parseInt((s.width()-j.width-40)/2,10)*-1).appendTo(a);break;default:s.css({width:j.width-u.padding*2,paddingLeft:u.padding,paddingRight:u.padding}).appendTo(a);break}s.hide()},z=function(){if(u.enableEscapeButton||u.enableKeyboardNav){e(document).bind("keydown.fb",function(t){if(t.keyCode==27&&u.enableEscapeButton){t.preventDefault();e.fancybox.close()}else if((t.keyCode==37||t.keyCode==39)&&u.enableKeyboardNav&&t.target.tagName!=="INPUT"&&t.target.tagName!=="TEXTAREA"&&t.target.tagName!=="SELECT"){t.preventDefault();e.fancybox[t.keyCode==37?"prev":"next"]()}})}if(!u.showNavArrows){f.hide();c.hide();return}if(u.cyclic&&b.length>1||g!==0){f.show()}if(u.cyclic&&b.length>1||g!=b.length-1){c.show()}},H=function(){if(!e.support.opacity){r.get(0).style.removeAttribute("filter");a.get(0).style.removeAttribute("filter")}if(h.autoDimensions){r.css("height","auto")}a.css("height","auto");if(k&&k.length){s.show()}if(u.showCloseButton){d.show()}z();if(u.hideOnContentClick){r.bind("click",e.fancybox.close)}if(u.hideOnOverlayClick){n.bind("click",e.fancybox.close)}e(window).bind("resize.fb",e.fancybox.resize);if(u.centerOnScroll){e(window).bind("scroll.fb",e.fancybox.center)}if(u.type=="iframe"){e('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(e.browser.msie?'allowtransparency="true""':"")+' scrolling="'+h.scrolling+'" src="'+u.href+'"></iframe>').appendTo(r)}a.show();S=false;e.fancybox.center();u.onComplete(b,g,u);R()},R=function(){var e,t;if(b.length-1>g){e=b[g+1].href;if(typeof e!=="undefined"&&e.match(m)){t=new Image;t.src=e}}if(g>0){e=b[g-1].href;if(typeof e!=="undefined"&&e.match(m)){t=new Image;t.src=e}}},K=function(e){var t={width:parseInt(O.width+(j.width-O.width)*e,10),height:parseInt(O.height+(j.height-O.height)*e,10),top:parseInt(O.top+(j.top-O.top)*e,10),left:parseInt(O.left+(j.left-O.left)*e,10)};if(typeof j.opacity!=="undefined"){t.opacity=e<.5?.5:e}a.css(t);r.css({width:t.width-u.padding*2,height:t.height-C*e-u.padding*2})},W=function(){return[e(window).width()-u.margin*2,e(window).height()-u.margin*2,e(document).scrollLeft()+u.margin,e(document).scrollTop()+u.margin]},q=function(){var e=W(),t={},i=u.autoScale,n=u.padding*2,a;if(u.width.toString().indexOf("%")>-1){t.width=parseInt(e[0]*parseFloat(u.width)/100,10)}else{t.width=u.width+n}if(u.height.toString().indexOf("%")>-1){t.height=parseInt(e[1]*parseFloat(u.height)/100,10)}else{t.height=u.height+n}if(i&&(t.width>e[0]||t.height>e[1])){if(h.type=="image"||h.type=="swf"){a=u.width/u.height;if(t.width>e[0]){t.width=e[0];t.height=parseInt((t.width-n)/a+n,10)}if(t.height>e[1]){t.height=e[1];t.width=parseInt((t.height-n)*a+n,10)}}else{t.width=Math.min(t.width,e[0]);t.height=Math.min(t.height,e[1])}}t.top=parseInt(Math.max(e[3]-20,e[3]+(e[1]-t.height-40)*.5),10);t.left=parseInt(Math.max(e[2]-20,e[2]+(e[0]-t.width-40)*.5),10);return t},Q=function(e){var t=e.offset();t.top+=parseInt(e.css("paddingTop"),10)||0;t.left+=parseInt(e.css("paddingLeft"),10)||0;t.top+=parseInt(e.css("border-top-width"),10)||0;t.left+=parseInt(e.css("border-left-width"),10)||0;t.width=e.width();t.height=e.height();return t},V=function(){var t=h.orig?e(h.orig):false,i={},n,a;if(t&&t.length){n=Q(t);i={width:n.width+u.padding*2,height:n.height+u.padding*2,top:n.top-u.padding-20,left:n.left-u.padding-20}}else{a=W();i={width:u.padding*2,height:u.padding*2,top:parseInt(a[3]+a[1]*.5,10),left:parseInt(a[2]+a[0]*.5,10)}}return i},X=function(){if(!i.is(":visible")){clearInterval(v);return}e("div",i).css("top",I*-40+"px");I=(I+1)%12};e.fn.fancybox=function(t){if(!e(this).length){return this}e(this).data("fancybox",e.extend({},t,e.metadata?e(this).metadata():{})).unbind("click.fb").bind("click.fb",function(t){t.preventDefault();if(S){return}S=true;e(this).blur();p=[];l=0;var i=e(this).attr("rel")||"";if(!i||i==""||i==="nofollow"){p.push(this)}else{p=e("a[rel="+i+"], area[rel="+i+"]");l=p.index(this)}F();return});return this};e.fancybox=function(t){var i;if(S){return}S=true;i=typeof arguments[1]!=="undefined"?arguments[1]:{};p=[];l=parseInt(i.index,10)||0;if(e.isArray(t)){for(var n=0,a=t.length;n<a;n++){if(typeof t[n]=="object"){e(t[n]).data("fancybox",e.extend({},i,t[n]))}else{t[n]=e({}).data("fancybox",e.extend({content:t[n]},i))}}p=jQuery.merge(p,t)}else{if(typeof t=="object"){e(t).data("fancybox",e.extend({},i,t))}else{t=e({}).data("fancybox",e.extend({content:t},i))}p.push(t)}if(l>p.length||l<0){l=0}F()};e.fancybox.showActivity=function(){clearInterval(v);i.show();v=setInterval(X,66)};e.fancybox.hideActivity=function(){i.hide()};e.fancybox.next=function(){return e.fancybox.pos(g+1)};e.fancybox.prev=function(){return e.fancybox.pos(g-1)};e.fancybox.pos=function(e){if(S){return}e=parseInt(e);p=b;if(e>-1&&e<b.length){l=e;F()}else if(u.cyclic&&b.length>1){l=e>=b.length?0:b.length-1;F()}return};e.fancybox.cancel=function(){if(S){return}S=true;e.event.trigger("fancybox-cancel");D();h.onCancel(p,l,h);S=false};e.fancybox.close=function(){if(S||a.is(":hidden")){return}S=true;if(u&&false===u.onCleanup(b,g,u)){S=false;return}D();e(d.add(f).add(c)).hide();e(r.add(n)).unbind();e(window).unbind("resize.fb scroll.fb");e(document).unbind("keydown.fb");r.find("iframe").attr("src",A&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank");if(u.titlePosition!=="inside"){s.empty()}a.stop();function t(){n.fadeOut("fast");s.empty().hide();a.hide();e.event.trigger("fancybox-cleanup");r.empty();u.onClosed(b,g,u);b=h=[];g=l=0;u=h={};S=false}if(u.transitionOut=="elastic"){O=V();var i=a.position();j={top:i.top,left:i.left,width:a.width(),height:a.height()};if(u.opacity){j.opacity=1}s.empty().hide();T.prop=1;e(T).animate({prop:0},{duration:u.speedOut,easing:u.easingOut,step:K,complete:t})}else{a.fadeOut(u.transitionOut=="none"?0:u.speedOut,t)}};e.fancybox.resize=function(){if(n.is(":visible")){n.css("height",e(document).height())}e.fancybox.center(true)};e.fancybox.center=function(){var e,t;if(S){return}t=arguments[0]===true?1:0;e=W();if(!t&&(a.width()>e[0]||a.height()>e[1])){return}a.stop().animate({top:parseInt(Math.max(e[3]-20,e[3]+(e[1]-r.height()-40)*.5-u.padding)),left:parseInt(Math.max(e[2]-20,e[2]+(e[0]-r.width()-40)*.5-u.padding))},typeof arguments[0]=="number"?arguments[0]:200)};e.fancybox.init=function(){if(e("#fancybox-wrap").length){return}e("body").append(t=e('<div id="fancybox-tmp"></div>'),i=e('<div id="fancybox-loading"><div></div></div>'),n=e('<div id="fancybox-overlay"></div>'),a=e('<div id="fancybox-wrap"></div>'));o=e('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(a);var l=navigator.appName=="Microsoft Internet Explorer"&&parseInt(navigator.appVersion)<=5&&navigator.appVersion.indexOf("MSIE")!=-1;o.append(r=e('<div id="fancybox-content"></div>'),d=e('<a id="fancybox-close"></a>'),s=e('<div id="fancybox-title"></div>'),f=e('<a href="javascript:;" id="fancybox-left">'+(l?'<span class="fancy-ico" id="fancybox-left-ico"></span>':"")+"</a>"),c=e('<a href="javascript:;" id="fancybox-right">'+(l?'<span class="fancy-ico" id="fancybox-right-ico"></span>':"")+"</a>"));d.click(e.fancybox.close);i.click(e.fancybox.cancel);f.click(function(t){t.preventDefault();e.fancybox.prev()});c.click(function(t){t.preventDefault();e.fancybox.next()});if(e.fn.mousewheel){a.bind("mousewheel.fb",function(t,i){if(S){t.preventDefault()}else if(e(t.target).get(0).clientHeight==0||e(t.target).get(0).scrollHeight===e(t.target).get(0).clientHeight){t.preventDefault();e.fancybox[i>0?"prev":"next"]()}})}if(!e.support.opacity){a.addClass("fancybox-ie")}if(A){i.addClass("fancybox-ie6");a.addClass("fancybox-ie6");e('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(o)}};e.fn.fancybox.defaults={padding:10,margin:40,opacity:false,modal:false,cyclic:false,scrolling:"auto",width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:.7,overlayColor:"#777",titleShow:true,titlePosition:"float",titleFormat:null,titleFromAlt:false,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,enableKeyboardNav:true,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};e(document).ready(function(){e.fancybox.init()})})(jQuery);