(function(e,t){var n=e(t);e.fn.lazyload=function(i){var o=this;var r;var f={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:true,appear:null,load:null};function l(){var t=0;o.each(function(){var n=e(this);if(f.skip_invisible&&!n.is(":visible")){return}if(e.abovethetop(this,f)||e.leftofbegin(this,f)){}else if(!e.belowthefold(this,f)&&!e.rightoffold(this,f)){n.trigger("appear")}else{if(++t>f.failure_limit){return false}}})}if(i){if(undefined!==i.failurelimit){i.failure_limit=i.failurelimit;delete i.failurelimit}if(undefined!==i.effectspeed){i.effect_speed=i.effectspeed;delete i.effectspeed}e.extend(f,i)}r=f.container===undefined||f.container===t?n:e(f.container);if(0===f.event.indexOf("scroll")){r.bind(f.event,function(e){return l()})}this.each(function(){var t=this;var n=e(t);t.loaded=false;n.one("appear",function(){if(!this.loaded){if(f.appear){var i=o.length;f.appear.call(t,i,f)}e("<img />").bind("load",function(){n.hide().attr("src",n.data(f.data_attribute))[f.effect](f.effect_speed);t.loaded=true;var i=e.grep(o,function(e){return!e.loaded});o=e(i);if(f.load){var r=o.length;f.load.call(t,r,f)}}).attr("src",n.data(f.data_attribute))}});if(0!==f.event.indexOf("scroll")){n.bind(f.event,function(e){if(!t.loaded){n.trigger("appear")}})}});n.bind("resize",function(e){l()});l();return this};e.belowthefold=function(i,o){var r;if(o.container===undefined||o.container===t){r=n.height()+n.scrollTop()}else{r=e(o.container).offset().top+e(o.container).height()}return r<=e(i).offset().top-o.threshold};e.rightoffold=function(i,o){var r;if(o.container===undefined||o.container===t){r=n.width()+n.scrollLeft()}else{r=e(o.container).offset().left+e(o.container).width()}return r<=e(i).offset().left-o.threshold};e.abovethetop=function(i,o){var r;if(o.container===undefined||o.container===t){r=n.scrollTop()}else{r=e(o.container).offset().top}return r>=e(i).offset().top+o.threshold+e(i).height()};e.leftofbegin=function(i,o){var r;if(o.container===undefined||o.container===t){r=n.scrollLeft()}else{r=e(o.container).offset().left}return r>=e(i).offset().left+o.threshold+e(i).width()};e.inviewport=function(t,n){return!e.rightofscreen(t,n)&&!e.leftofscreen(t,n)&&!e.belowthefold(t,n)&&!e.abovethetop(t,n)};e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return!e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})})(jQuery,window);