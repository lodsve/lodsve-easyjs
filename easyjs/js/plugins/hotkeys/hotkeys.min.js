(function(r){r.fn.__bind__=r.fn.bind;r.fn.__unbind__=r.fn.unbind;r.fn.__find__=r.fn.find;var e={version:"0.7.8",override:/keydown|keypress|keyup/g,triggersMap:{},specialKeys:{27:"esc",9:"tab",32:"space",13:"return",8:"backspace",145:"scroll",20:"capslock",144:"numlock",19:"pause",45:"insert",36:"home",46:"del",35:"end",33:"pageup",34:"pagedown",37:"left",38:"up",39:"right",40:"down",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},newTrigger:function(r,e,i){var t={};t[r]={};t[r][e]={cb:i,disableInInput:false};return t}};if(r.browser.mozilla){e.specialKeys=r.extend(e.specialKeys,{96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"})}r.fn.find=function(e){this.query=e;return r.fn.__find__.apply(this,arguments)};r.fn.unbind=function(i,t,n){if(r.isFunction(t)){n=t;t=null}if(t&&typeof t==="string"){var s=(this.prevObject&&this.prevObject.query||this[0].id&&this[0].id||this[0]).toString();var a=i.split(" ");for(var f=0;f<a.length;f++){delete e.triggersMap[s][a[f]][t]}}return this.__unbind__(i,n)};r.fn.bind=function(i,t,n){var s=i.match(e.override);if(r.isFunction(t)||!s){return this.__bind__(i,t,n)}else{var a=null,f=r.trim(i.replace(e.override,""));if(f){a=this.__bind__(f,t,n)}if(typeof t==="string"){t={combi:t}}if(t.combi){for(var l=0;l<s.length;l++){var o=s[l];var p=t.combi.toLowerCase(),u=e.newTrigger(o,p,n),h=(this.prevObject&&this.prevObject.query||this[0].id&&this[0].id||this[0]).toString();u[o][p].disableInInput=t.disableInInput;if(!e.triggersMap[h]){e.triggersMap[h]=u}else if(!e.triggersMap[h][o]){e.triggersMap[h][o]=u[o]}var d=e.triggersMap[h][o][p];if(!d){e.triggersMap[h][o][p]=[u[o][p]]}else if(d.constructor!==Array){e.triggersMap[h][o][p]=[d]}else{e.triggersMap[h][o][p][d.length]=u[o][p]}this.each(function(){var e=r(this);if(e.attr("hkId")&&e.attr("hkId")!==h){h=e.attr("hkId")+";"+h}e.attr("hkId",h)});a=this.__bind__(s.join(" "),t,e.handler)}}return a}};e.findElement=function(e){if(!r(e).attr("hkId")){if(r.browser.opera||r.browser.safari){while(!r(e).attr("hkId")&&e.parentNode){e=e.parentNode}}}return e};e.handler=function(i){var t=e.findElement(i.currentTarget),n=r(t),s=n.attr("hkId");if(s){s=s.split(";");var a=i.which,f=i.type,l=e.specialKeys[a],o=!l&&String.fromCharCode(a).toLowerCase(),p=i.shiftKey,u=i.ctrlKey,h=i.altKey||i.originalEvent.altKey,d=null;for(var g=0;g<s.length;g++){if(e.triggersMap[s[g]][f]){d=e.triggersMap[s[g]][f];break}}if(d){var c;if(!p&&!u&&!h){c=d[l]||o&&d[o]}else{var _="";if(h)_+="alt+";if(u)_+="ctrl+";if(p)_+="shift+";c=d[_+l];if(!c){if(o){c=d[_+o]||d[_+e.shiftNums[o]]||_==="shift+"&&d[e.shiftNums[o]]}}}if(c){var b=false;for(var g=0;g<c.length;g++){if(c[g].disableInInput){var v=r(i.target);if(n.is("input")||n.is("textarea")||v.is("input")||v.is("textarea")){return true}}b=b||c[g].cb.apply(this,[i])}return b}}}};window.hotkeys=e;return r})(jQuery);